<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/"
               xmlns:set="http://www.sitecore.net/xmlconfig/set/"
               xmlns:env="http://www.sitecore.net/xmlconfig/env/"
               xmlns:role="http://www.sitecore.net/xmlconfig/role/">
  <sitecore>
    <sites>
      <!--
        JSS Site Registration
        This configures the site with Sitecore - i.e. host headers, item paths.
        If your JSS app lives within an existing Sitecore site, this may not be necessary.

        IMPORTANT: JSS sites ship in 'live mode', which makes development and testing easy,
        but disables workflow and publishing. Before going to production, change the `database`
        below to `web` instead of `master`.
      -->
      <site patch:before="site[@name='website']"
            name="_nuxt"
            virtualFolder="/_nuxt"
            physicalFolder="/_nuxt"
            enableTracking="false"
            domain="extranet" />

      <site patch:before="site[@name='website']"
            inherits="website"
            scheme="https"
            name="ttt-shine"
            targetHostName="$(targetHostName)"
            rootPath="/sitecore/content/ttt-shine"
            startItem="/home"
            database="master"
            enableItemLanguageFallback="true"
            language="en"
            htmlCacheSize="100MB"
            role:require="ContentManagement"/>

      <site patch:before="site[@name='website']"
            inherits="website"
            scheme="https"
            name="ttt-shine"
            hostName="$(cdHostName)|$(loadBalancerHostName)"
            rootPath="/sitecore/content/ttt-shine"
            startItem="/home"
            database="web"
            enableItemLanguageFallback="true"
            language="en"
            htmlCacheSize="100MB"
            role:require="ContentDelivery"/>

      <site patch:before="site[@name='website']"
            inherits="website"
            name="ttt-shine"
            scheme="http"
            hostName="$(cdHostName)"
            targetHostName="$(targetHostName)"
            rootPath="/sitecore/content/ttt-shine"
            startItem="/home"
            database="web"
            enableItemLanguageFallback="true"
            language="en"
            htmlCacheSize="100MB"
            role:require="Standalone"/>
    </sites>
    <javaScriptServices>
      <apps>
        <app name="ttt-shine"
             deploymentSecret="YOUR DEPLOYMENT SECRET"
             debugSecurity="false"
             sitecorePath="/sitecore/content/ttt-shine"
             inherits="defaults"
             useLanguageSpecificLayout="true"
             serverBundle="index"
             serverSideRenderingFunctionName="renderView"
             serverSideRenderingEngine="http"
             serverSideRenderingEngineEndpointUrl="$(eeUrl)/api/ee"
             dictionaryDomain="Dictionary"
             dictionaryPath="/sitecore/content/ttt-shine/Dictionary"
             importUser="sitecore\anonymous"/>
      </apps>
      <renderEngines>
        <renderEngine name="http">
          <instance id="ttt-shine" inherits="defaults">
            <!--
              This setting allows you to override the `serverSideRenderingEngineEndpointUrl` value defined above
              via a querystring parameter, `?sc_httprenderengineurl=https://feature-branch-name-ee.ttt.com/api/ee`
              Does NOT apply to Prod
            -->
            <AllowOptionsOverride env:require="!Prod">true</AllowOptionsOverride>
          </instance>
        </renderEngine>
      </renderEngines>
    </javaScriptServices>
    <settings>
      <setting name="Preview.DefaultSite" value="" >
        <patch:attribute name="value" value="ttt-shine" />
      </setting>
      <setting name="PagePreview.SiteName" value="website" >
        <patch:attribute name="value" value="ttt-shine" />
      </setting>
    </settings>
  </sitecore>
</configuration>